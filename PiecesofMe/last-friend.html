<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>You Were My Last Friend</title>
    <link rel="stylesheet" href="/PiecesofMe/styles.css">
</head>
<body>
    <button class="theme-toggle" aria-label="Toggle theme">ðŸŒ—</button>
    <div class="container">
        <h1>You Were My Last Friend</h1>
        <div class="poem"></div>
    </div>

    <script>
        const poem = `I stood in the snow, the cold biting deep,
Crying silently, afraid they'd see me weep.
For an hour, I held the phone to my ear,
Hoping you'd say something I needed to hear.

You stayed on the line, missed your stops for me,
And for a moment, I thought, "Maybe you see."
But your words cut deepâ€”"It's your thinking," you said,
Leaving my heart heavy with things unsaid.

"I need space," you told me, "step by step,"
But all I felt was the weight of regret.
You said I gave you stress, that I brought you pressure,
When all I wanted was to hold our connection together.

You didn't like the words I poured from my heart,
The big messages, the noteâ€”a vulnerable start.
You said you wanted peace, to avoid the strain,
And I wonder if you feared hurting me again.

Maybe this wasn't friendshipâ€”maybe I blurred the lines,
Maybe I mistook your kindness for signs.
You were my last friend, the one I held tight,
But I see now, I was chasing fading light.

I gave up others who stood by my side,
Friends I'd pushed away, my loyalty misapplied.
I lost my worth, let my dignity fall,
Because I thought you were worth it all.

But friendship isn't begging, it's not built on pain,
It's not standing in snow, crying in vain.
It's not silence after you've poured out your soul,
Or losing yourself just to feel whole.

You were my last friend, and I always cared,
But now I choose myselfâ€”it's only fair.
I'll carry the lessons, but leave the pain,
And start to rebuild myself again.`;

        const poemContainer = document.querySelector('.poem');
        const stanzas = poem.split('\n\n');
        
        stanzas.forEach((stanza, index) => {
            const div = document.createElement('div');
            div.className = 'stanza';
            div.textContent = stanza;
            div.style.animation = `stanzaFadeIn 0.8s ${index * 0.3}s forwards`;
            poemContainer.appendChild(div);
        });

        // Theme toggle
        const themeToggle = document.querySelector('.theme-toggle');
        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');

        function setTheme(isDark) {
            if (isDark) {
                document.body.setAttribute('data-theme', 'dark');
                themeToggle.textContent = 'ðŸŒ–';
            } else {
                document.body.removeAttribute('data-theme');
                themeToggle.textContent = 'ðŸŒ—';
            }
        }

        // Initialize theme based on system preference
        setTheme(prefersDarkScheme.matches);

        themeToggle.addEventListener('click', () => {
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            setTheme(!isDark);
        });

        // Listen for system theme changes
        prefersDarkScheme.addEventListener('change', (e) => {
            setTheme(e.matches);
        });
    </script>
</body>
</html>